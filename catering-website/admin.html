<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Catering Orders</title>
<link rel="stylesheet" href="css/style.css">
<style>
  table { width:100%; border-collapse:collapse; margin:20px 0;}
  th, td { border:1px solid #ddd; padding:10px; text-align:center;}
  th { background:#ff2929; color:white; }
  .btn { padding:6px 12px; margin:2px; border:none; border-radius:5px; cursor:pointer;}
  .approve { background:green; color:white; }
  .reject { background:red; color:white; }
</style>
</head>
<body>

  
  <header>
  <nav class="navbar">
    <div class="logo">
      <img src="images/logo.png" alt="Catering Logo" />
      <h1>Catering Service</h1>
    </div>

    <!-- Navigation links -->
    <ul class="nav-links">
      <li><a href="index.html" class="active">Home</a></li>
      <li><a href="menu.html">Menu</a></li>
      <li><a href="cart.html">Order</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="admin.html">Admin</a></li>
    </ul>

    <!-- Mobile Menu Toggle Button -->
    <button class="menu-toggle">☰</button>
  </nav>
</header>

<script>
  const toggleBtn = document.querySelector(".menu-toggle");
  const navLinks = document.querySelector(".nav-links");

  toggleBtn.addEventListener("click", () => {
    navLinks.classList.toggle("active");
  });
</script>


  <h1>Admin Panel - Orders</h1>
  <table>
    <thead>
      <tr>
        <th>Customer</th>
        <th>Mobile</th>
        <th>Dishes</th>
        <th>Date</th>
        <th>People</th>
        <th>Total</th>
        <th>Status</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="orders-table"></tbody>
  </table>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.26.0/firebase-app.js";
    import { getDatabase, ref, onValue, update } from "https://www.gstatic.com/firebasejs/11.26.0/firebase-database.js";

   const firebaseConfig = {
  apiKey: "AIzaSyAFcR7dpuPLCKxKVF8U21ogtLARx2djXpM",
  authDomain: "caters-710ea.firebaseapp.com",
  projectId: "caters-710ea",
  storageBucket: "caters-710ea.firebasestorage.app",
  messagingSenderId: "1058333296618",
  appId: "1:1058333296618:web:ba63fac8c4fca4758f5493",
  measurementId: "G-XFB81TQHKS"
};

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const ordersRef = ref(db, 'orders/');

    const table = document.getElementById("orders-table");

    onValue(ordersRef, (snapshot) => {
      table.innerHTML = "";
      const data = snapshot.val();
      if (data) {
        Object.keys(data).forEach(key => {
          const order = data[key];
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${order.customerName}</td>
            <td>${order.customerMobile}</td>
            <td>${order.dishes.map(d=>d.name).join(", ")}</td>
            <td>${order.orderDate}</td>
            <td>${order.numberOfPeople}</td>
            <td>₹${order.total}</td>
            <td>${order.status}</td>
            <td>
              <button class="btn approve" onclick="updateStatus('${key}','Approved')">Approve</button>
              <button class="btn reject" onclick="updateStatus('${key}','Rejected')">Reject</button>
            </td>
          `;
          table.appendChild(row);
        });
      }
    });

    window.updateStatus = function(key, status) {
      update(ref(db, 'orders/' + key), { status });
    }
  </script>
</body>
</html>
